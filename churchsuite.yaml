openapi: 3.0.3
info:
  title: ChurchSuite API
  description: >-
    This is an OpenAPI spec for the Church Suite API v1. It has been derived from the documentation in the Church Suite Github API repo.

    Although the documentation is pretty good, it's lacking a little detail, and the lack of a formal OpenAPI spec means that creating a client
    is a manual process.

    Please be aware that this spec is not complete and is sure to contain errors. You use it at your own risk.
    If you spot issues or want to offer improvements please feel free to submit PRs against the spec here: https://github.com/ChristChurchMayfair/churchsuite-openapi

    Noting the issues in the ChurchSuite API repo, it seems that a v2 API is under construction, and there are indications that they will provide an OpenAPI spec for it.
  contact:
    email: tom@christchurchmayfair.org
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.0
externalDocs:
  description: Find out more about the Church Suite API
  url: https://github.com/ChurchSuite/churchsuite-api
servers:
  - url: https://api.churchsuite.com
    description: Church Suite Production API
components:
  schemas:
    ModuleInfo:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        permission_use:
          type: boolean
        permission_manage:
          type: boolean
        permission_connect:
          type: boolean
    Tag:
      type: object
      properties:
        id:
          type: number
        tag_id:
          type: number
        name:
          type: string
        description:
          type: string
        colour:
          type: string
        type:
          type: string
          enum: ["smart","fixed"]
        tag_no_contacts:
          type: number
        no_contacts:
          type: number
        ctime:
          type: string
        cuser:
          type: string
        mtime:
          type: string
        muser:
          type: string
    Contact:
      type: object
      properties:
        id:
          type: number
        person_uuid:
          type: string
        type_id:
          type: string
        first_name:
          type: string
        last_name:
          type: string
        title:
          type: string
        middle_name:
          type: string
        formal_name:
          type: string
        former_name:
          type: string
        maiden_name:
          type: string
        sex:
          type: string
        date_of_birth:
          type: string
        marital:
          type: string
        spouse_id:
          type: integer
        address:
          type: string
        address2:
          type: string
        address3:
          type: string
        city:
          type: string
        county:
          type: string
        postcode:
          type: string
        country:
          type: string
        latitude:
          type: number
        longitude:
          type: number
        telephone:
          type: string
        mobile:
          type: string
        work_telephone:
          type: string
        email:
          type: string
        job:
          type: string
        employer:
          type: string
        public_options:
          type: object
          properties:
            invited:
              type: boolean
            access:
              type: boolean
            visible:
              type: object
              properties:
                enabled:
                  type: boolean
                address:
                  type: boolean
                email:
                  type: boolean
                mobile:
                  type: boolean
                telephone:
                  type: boolean
        communication:
          type: object
          properties:
            general_email:
              type: number
            general_sms:
              type: number
            phone:
              type: number
            post:
              type: number
            rota_email:
              type: number
            rota_sms:
              type: number
        location:
          type: array
          items:
            type: object
        custom_fields:
          type: array
          items:
            type: object
        images:
          type: array
          items:
            type: object
        ongoing_consent:
          type: object
          properties:
            required:
              type: number
            request_ctime:
              type: string
            granted_ctime:
              type: string
            granted_name:
              type: string
        status:
          type: string
        site_id:
          type: number
        site_ids:
          type: array
          items:
            type: string
        mtime:
          type: string
        muser:
          type: string
        ctime:
          type: string
        cuser:
          type: string
    Pagination:
      type: object
      properties:
        no_results:
          type: number
          description: "The total number of results available"
        page:
          type: number
          description: "The number of this page - seems to be indexed from 1"
        per_page:
          type: number
          description: "The number of results on this page"
  securitySchemes:
    AuthHeader:
      type: apiKey
      name: "X-Auth"
      in: header
    ApplicationId:
      type: apiKey
      name: "X-Application"
      in: header
    AccountId:
      type: apiKey
      name: "X-Account"
      in: header
paths:
  /v1/whoami:
    get:
      tags:
        - General
      summary: Return data on the user accessing the API
      responses:
        "200":
          description: A JSON array of user names
          content:
            application/json:
              schema:
                type: object
                properties:
                  username:
                    type: string
                  contact_id:
                    type: string
                    nullable: true
                  name:
                    type: string
                  email:
                    type: string
                  type:
                    type: string
                  modules:
                    type: object
                    properties:
                      addressbook:
                        $ref: "#/components/schemas/ModuleInfo"
                      children:
                        $ref: "#/components/schemas/ModuleInfo"
                      attendance:
                        $ref: "#/components/schemas/ModuleInfo"
                      calendar:
                        $ref: "#/components/schemas/ModuleInfo"
                      smallgroups:
                        $ref: "#/components/schemas/ModuleInfo"
                      rotas:
                        $ref: "#/components/schemas/ModuleInfo"
                      giving:
                        $ref: "#/components/schemas/ModuleInfo"
                      bookings:  
                        $ref: "#/components/schemas/ModuleInfo"
                  images:
                    type: array
                    items:
                      type: object
                  sites:
                    type: object
  /v1/profile:
    get:
      tags:
        - General
      description: "Return the details regarding an account's global contact information."
      parameters: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  timezone:
                    type: string
                  currency:
                    type: string
                  language:
                    type: string
                  give2_keyword:
                    type: string
                  first_day_of_week:
                    type: string
                  data_protection_title:
                    type: string
                  data_protection_body:
                    type: string
                  data_protection_help:
                    type: string
                  email_font:
                    type: string
                  email_footer:
                    type: string
                  email_template:
                    type: string
                  email_open_tracking:
                    type: boolean
                  billing_address:
                    type: object
                    properties:
                      id:
                        type: number
                        nullable: true
                      line1:
                        type: string
                      line2:
                        type: string
                      line3:
                        type: string
                      city:
                        type: string
                      county:
                        type: string
                      postcode:
                        type: string
                      country:
                        type: string
                      latitude:
                        type: number
                      longitude:
                        type: number
                  billing_region:
                    type: string
                  billing_contact:
                    type: object
                    properties:
                      first_name:
                        type: string
                      last_name:
                        type: string
                      telephone:
                        type: string
                      email:
                        type: string
                  account_contact:
                    type: object
                    properties:
                      first_name:
                        type: string
                      last_name:
                        type: string
                      telephone:
                        type: string
                      email:
                        type: string
                  data_protection_contact:
                    type: object
                    properties:
                      first_name:
                        type: string
                      last_name:
                        type: string
                      telephone:
                        type: string
                      email:
                        type: string
                  ctime:
                    type: string
                  cuser:
                    type: string
                  mtime:
                    type: string
                  muser:
                    type: string
                example:
                  name: ChurchSuite Developers
                  timezone: Europe/London
                  currency: GBP
                  language: en-gb
                  give2_keyword: KHC
                  first_day_of_week: '1'
                  data_protection_title: Privacy Notice
                  data_protection_body: ''
                  data_protection_help: ''
                  email_font: Open Sans
                  email_footer: Kings Hope Church
                  email_template: plain
                  email_open_tracking: true
                  billing_address:
                    id: 
                    line1: 1 Broadway
                    line2: Lace Market
                    line3: 
                    city: Nottingham
                    county: Nottinghamshire
                    postcode: NG1 1PR
                    country: GB
                    latitude: 52.9421262260486
                    longitude: -1.17162785403717
                  billing_region: ENG
                  billing_contact:
                    first_name: Nathaniel
                    last_name: Alsop
                    telephone: 0115 824 2300
                    email: support@churchsuite.com
                  account_contact:
                    first_name: Nathaniel
                    last_name: Alsop
                    telephone: 0115 824 2300
                    email: nathaniel@churchsuite.com
                  data_protection_contact:
                    first_name: Data
                    last_name: Protection
                    telephone: 0115 824 2300
                    email: datacontroller@kingshope.church
                  ctime: '2022-04-08 10:58:42'
                  cuser: churchsuite
                  mtime: '2022-09-13 10:14:50'
                  muser: Ant

  /v1/addressbook/contacts:
    get:
      tags:
        - "Address Book - Contacts"
      description: 'Return contacts ordered alphabetically'
      parameters:
        - in: query
          name: name
          description: "Return contacts whose Name matches the query parameter value"
          required: false
          schema:
            type: string
          example: "gavin courtney"
        - in: query
          name: q
          description: "Return contacts whose Name, Address, Job, Email, Telephone or Mobile contains the query parameter value"
          required: false
          schema:
            type: string
          example: "gavin"
        - in: query
          name: page
          description: "Return the nth page of contacts"
          required: false
          schema:
            type: integer
          example: 2
        - in: query
          name: per_page
          description: "Return n contacts per page"
          required: false
          schema:
            type: integer
          example: 100
        - in: query
          name: public_access
          description: "Return contacts filtered by \"Allow My ChurchSuite access\""
          required: false
          schema:
            type: integer
            enum: [0,1]
          example: 1
        - in: query
          name: public_invited
          description: "Return contacts filtered by whether they have been sent a My ChurchSuite invite or not."
          required: false
          schema:
            type: integer
            enum: [0,1]
          example: 1
        - in: query
          name: public_visible
          description: "Return contacts filtered by their Public Communication \"Name is visible\" setting. Default is 1"
          required: false
          schema:
            type: integer
            nullable: true
            enum: [0,1]
          example: 1
        - in: query
          name: view
          description: "Return archived contacts; by default only active contacts will be returned"
          required: false
          schema:
            type: string
            enum: [active,archived]
          example: archived
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: object
                example:
                  pagination:
                    no_results: 3
                    page: 1
                    per_page: 1
                  contacts:
                  - id: 112
                    person_id: 172
                    uuid: cb246f98-65ef-4cd5-825f-1db639a37490
                    type_id: contact_112
                    first_name: George
                    last_name: Baker
                    title: Mr
                    middle_name: ''
                    formal_name: Formal
                    former_name: ''
                    maiden_name: ''
                    sex: m
                    date_of_birth: '1969-03-30'
                    marital: married
                    spouse_id: 1042
                    address: 44 Pruder Lane
                    address2: ''
                    address3: ''
                    city: Nottingham
                    county: ''
                    postcode: NG9 2FE
                    country: ''
                    latitude: 52.926458
                    longitude: -1.204129
                    telephone: 0161 730 2326
                    mobile: '07987 654 123'
                    work_telephone: ''
                    email: george.baker1@gmail.com
                    job: Web Developer
                    employer: National Health Service
                    public_options:
                      invited: true
                      access: true
                      visible:
                        enabled: true
                        address: true
                        email: true
                        mobile: true
                        telephone: true
                    communication:
                      general_email: 1
                      general_sms: 1
                      phone: 1
                      post: 1
                      rota_email: 1
                      rota_sms: 1
                    location:
                      address: 44 Pruder Lane, Nottingham, NG9 2FE
                      latitude: '52.926458'
                      longitude: "-1.204129"
                    custom_fields: []
                    images: []
                    ongoing_consent:
                      required: 1
                      request_ctime: '2022-01-19 16:15:05'
                      granted_ctime: 
                      granted_name: 
                    status: active
                    site_id: 1
                    site_ids:
                    - '1'
                    mtime: '2021-05-25 16:14:16'
                    muser: richard
                    ctime: '2011-07-18 22:20:12'
                    cuser: import
                properties:
                  pagination:
                    $ref: "#/components/schemas/Pagination"
                  contacts:
                    type: array
                    items:
                      $ref: "#/components/schemas/Contact"
  /v1/addressbook/contact/{personId}:
    get:
      operationId: getContact
      tags:
        - "Address Book - Contacts"
      description: ''
      parameters:
        - in: path
          name: personId
          required: true
          schema:
            type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Contact"
    delete:
      tags:
        - General
      description: ''
      parameters:
        - in: path
          name: personId
          schema:
            type: integer
          required: true
      responses:
        '200':
          description: OK
  /v1/addressbook/contact/{personId}/tags:
    get:
      tags:
        - "Address Book - Tags"
      description: ''
      parameters:
        - in: path
          name: personId
          required: true
          schema:
            type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pagination:
                    type: object
                    properties:
                      no_results:
                        type: number
                      page:
                        type: number
                      per_page:
                        type: number
                  tags:
                    type: array
                    items:
                      $ref: "#/components/schemas/Tag"
  /v1/addressbook/contact/{personId}/keydates:
    get:
      tags:
        - "Address Book - Contacts"
      description: ''
      parameters:
        - in: path
          name: personId
          required: true
          schema:
            type: number
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  keydates:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        name:
                          type: string
                        date:
                          type: string
                        description:
                          type: string
                        resource_keydate_id:
                          type: number
  /v1/addressbook/contact:
    post:
      tags:
        - "Address Book - Contacts"
      description: ''
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                postcode:
                  type: string
                country:
                  type: string
                sex:
                  type: string
                marital:
                  type: string
                dates:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                      date:
                        type: string
                site_ids:
                  type: array
                  items:
                    type: number

      responses:
        '201':
          description: Created
          links:
            GetContactByPersonId:
              operationId: getContact
              parameters:
                personId: "$response.body#/id"
              description: >
                The `id` value returned in the response can be used as
                the `personId` parameter in `GET /v1/addressbook/contact/{personId}`.
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  person_uuid:
                    type: string
                  type_id:
                    type: string
                  first_name:
                    type: string
                  last_name:
                    type: string
                  title:
                    type: string
                  middle_name:
                    type: string
                  formal_name:
                    type: string
                  former_name:
                    type: string
                  maiden_name:
                    type: string
                  sex:
                    type: string
                  date_of_birth:
                    type: string
                  marital:
                    type: string
                  spouse_id:
                    type: string
                  address:
                    type: string
                  address2:
                    type: string
                  address3:
                    type: string
                  city:
                    type: string
                  county:
                    type: string
                  postcode:
                    type: string
                  country:
                    type: string
                  latitude:
                    type: number
                  longitude:
                    type: number
                  telephone:
                    type: string
                  mobile:
                    type: string
                  work_telephone:
                    type: string
                  email:
                    type: string
                  job:
                    type: string
                  employer:
                    type: string
                  public_options:
                    type: object
                    properties:
                      invited:
                        type: boolean
                      access:
                        type: boolean
                      visible:
                        type: object
                        properties:
                          enabled:
                            type: boolean
                          address:
                            type: boolean
                          email:
                            type: boolean
                          mobile:
                            type: boolean
                          telephone:
                            type: boolean
                  communication:
                    type: object
                    properties:
                      general_email:
                        type: number
                      general_sms:
                        type: number
                      phone:
                        type: number
                      post:
                        type: number
                      rota_email:
                        type: number
                      rota_sms:
                        type: number
                  location:
                    type: array
                    items:
                      type: object
                  custom_fields:
                    type: array
                    items:
                      type: object
                  images:
                    type: array
                    items:
                      type: object
                  ongoing_consent:
                    type: object
                    properties:
                      required:
                        type: number
                      request_ctime:
                        type: string
                      granted_ctime:
                        type: string
                      granted_name:
                        type: string
                  status:
                    type: string
                  site_id:
                    type: number
                  site_ids:
                    type: array
                    items:
                      type: string
                  mtime:
                    type: string
                  muser:
                    type: string
                  ctime:
                    type: string
                  cuser:
                    type: string
  /v1/addressbook/tags:
    get:
      tags:
        - "Address Book - Tags"
      description: ''
      parameters: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pagination:
                    $ref: "#/components/schemas/Pagination"
                  tags:
                    type: array
                    items:
                      $ref: "#/components/schemas/Tag"
  /v1/addressbook/tag/{tagId}:
    get:
      tags:
        - "Address Book - Tags"
      description: "Return data for a specific tag with the given ID"
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"
  /v1/addressbook/tag/{tagId}/contacts:
    get:
      tags:
        - "Address Book - Tags"
      description: 'Return the contacts for the tag with the given ID'
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  pagination:
                    $ref: "#/components/schemas/Pagination"
                  contacts:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                        type_id:
                          type: string
                        first_name:
                          type: string
                        last_name:
                          type: string
                        title:
                          type: string
                        middle_name:
                          type: string
                        formal_name:
                          type: string
                        former_name:
                          type: string
                        maiden_name:
                          type: string
                        sex:
                          type: string
                        date_of_birth:
                          type: string
                        person_id:
                          type: number
                        uuid:
                          type: string
                        marital:
                          type: string
                        spouse_id:
                          type: number
                        address:
                          type: string
                        address2:
                          type: string
                        address3:
                          type: string
                        city:
                          type: string
                        county:
                          type: string
                        postcode:
                          type: string
                        country:
                          type: string
                        latitude:
                          type: number
                        longitude:
                          type: number
                        telephone:
                          type: string
                        mobile:
                          type: string
                        work_telephone:
                          type: string
                        email:
                          type: string
                        job:
                          type: string
                        employer:
                          type: string
                        public_options:
                          type: object
                          properties:
                            invited:
                              type: boolean
                            access:
                              type: boolean
                            visible:
                              type: object
                              properties:
                                enabled:
                                  type: boolean
                                address:
                                  type: boolean
                                email:
                                  type: boolean
                                mobile:
                                  type: boolean
                                telephone:
                                  type: boolean
                        communication:
                          type: object
                          properties:
                            general_email:
                              type: number
                            general_sms:
                              type: number
                            phone:
                              type: number
                            post:
                              type: number
                            rota_email:
                              type: number
                            rota_sms:
                              type: number
                        location:
                          type: object
                          properties:
                            address:
                              type: string
                            latitude:
                              type: string
                            longitude:
                              type: string
                        custom_fields:
                          type: array
                          items:
                            type: object
                        images:
                          type: array
                          items:
                            type: object
                        ongoing_consent:
                          type: object
                          properties:
                            required:
                              type: number
                            request_ctime:
                              type: string
                            granted_ctime:
                              type: string
                            granted_name:
                              type: string
                        status:
                          type: string
                        site_id:
                          type: number
                        site_ids:
                          type: array
                          items:
                            type: string
                        mtime:
                          type: string
                        muser:
                          type: string
                        ctime:
                          type: string
                        cuser:
                          type: string
security:
  - AuthHeader: []
    ApplicationId: []
    AccountId: []
